<!DOCTYPE html>
<html>

<head>
<title>CLT Instagram</title>

<style type="text/css" media="screen">

	body {
		background: #ccc;
	}
	
</style>
</head>
<body>
	
	<div class="instagram"></div>
	<div class="photo"></div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://jsreid.jit.su/socket.io/socket.io.js"></script>
<script>

(function($) {
	

	var socket = io.connect('http://jsreid.jit.su/');
	socket.on('photo', function (raw) {
		var obj = JSON.parse(raw)['data'][0];
		var photo = obj.images.low_resolution.url;
		$('.photo').prepend('<img src="' + photo + '">&nbsp;');
	});
	
	
	$.ajax({
		type: "GET",
		dataType: "jsonp",
		cache: false,
		url: "https://api.instagram.com/v1/geographies/1369637/media/recent?client_id=eec7fe0344b44e37a84f83e4a07d3e6a",
		success: function(response) {
			console.log(response);
			
			// Get the amount of images in the recent images Instagram feed
			var amount = response.data.length;
			
			// Subtract 1 from the length because the array starts at 0
			amount = amount - 1;
			
			// Loop through the available images and print to screen
			for (var i = amount - 1; i >= 0; i--) {
				var low_src = response.data[i].images.low_resolution.url;
				$('.photo').prepend('<img src="' + low_src + '">&nbsp;');
			}
		}
	});
	
	
})(jQuery);

</script>
</html>